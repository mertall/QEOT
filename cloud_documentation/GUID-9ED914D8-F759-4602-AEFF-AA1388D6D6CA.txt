VMware DocsMyLibrarytimesMyLibraryMyLibraryclose-lineVMware updates the Horizon Cloud software components periodically to include new features and bug fixes. VMware typically updates the in-cloud management environment on a weekly basis and updates the software components used in a deployed node on a roughly quarterly basis. The normal update process takes place without incurring any system downtime. Horizon CloudImportant:If the node is already integrated with the cloud-hosted VMware Identity Managerâ„¢ and you are using the Linux connector version 2017.12.1.0, you should update the connector to version 2018.1.1.1 before updating the node. Follow the steps in Preparing to Upgrade VMware Identity Manager Connector. Then upgrade your node. VMware Identity Managerâ„¢Preparing to Upgrade VMware Identity Manager ConnectorUpdating the software in your deployed node results in appropriately updating the core node management software and the Unified Access Gateway software. For example, a node software update can include updates for the node management software or for the Unified Access Gateway software or for both. Use the Capacity page to see at a glance which nodes have updates available for them. Navigate to Settings > Capacity. A visual indicator appears next to those nodes that have updates available for them. When your cursor hovers over the indicator, a pop-up displays additional details. Settings > CapacitySettingsCapacityThe following screenshot illustrates where the indication of an available update appears in the Location view of the Capacity page. You can see the update details for a specific node by selecting Settings > Capacity and clicking the node to open its summary page. When an update is available, an on-screen message describing the update appears at the Version No entry. The displayed version number corresponds to the version of the node's software manifest. Settings > CapacitySettingsCapacityVersion NoNote:After you have updated a node from version numbers below 730 to later versions, you can then update the agent-related software in the node's already published images, farms, and VDI desktop assignments to the same agent version level that comes with the updated node version. The agent-related update is done in a process separate from updating the node itself. For the steps on how to update the agent-related software after the node is updated, see Update Agent Software for RDSH Images, Update Agent Software for Dedicated VDI Desktop Assignments, and Update Agent Software for Images Used by Floating VDI Desktop Assignments. Update Agent Software for RDSH ImagesUpdate Agent Software for Dedicated VDI Desktop AssignmentsUpdate Agent Software for Images Used by Floating VDI Desktop AssignmentsThe node software update process is performed in the following stages. Downloading new software, an automatic process Downloading new software, an automatic process Scheduling the update Scheduling the update Migrating to the new version Migrating to the new version Stage One: Download New SoftwareThe first stage, downloading new software, takes place when a new version of the node's software is available. Horizon Cloud automatically triggers the deployed node to download the new version of the software. The deployer software builds an inactive parallel node environment. This stage is transparent to you and does not cause any downtime. Horizon CloudWhen the first stage finishes, a visual indication that an update is available appears on the Capacity page next to the nodes which are at a level lower than the update. Stage Two: Scheduling Update of a NodeThe second stage is scheduling the update. You schedule the update on a node from the node's summary page, by selecting Update > Schedule. Update > ScheduleUpdateScheduleImportant:Before the update runs, remove any management locks in Microsoft Azure that you might have set on the node's management virtual machines (VMs): vmw-hcs-nodeID VM vmw-hcs-nodeID VM nodeIDvmw-hcs-nodeID-uag1 and uag2 (two VMs) vmw-hcs-nodeID-uag1 and uag2 (two VMs) nodeIDwhere nodeID is the node's UUID. Microsoft Azure provides a capability for locking resources to prevent changes to them. You can use the Microsoft Azure portal to apply such management locks on an entire resource group or on individual resources. If you or your organization has applied management locks on the node's management VMs, those locks must be removed before the update runs. Otherwise, the update process will not successfully complete. nodeIDYou determine the convenient time for the update to take place. Typically, the update itself, or the migration from the existing version to the new version, takes about ten minutes. As a best practice, schedule the update at a time when the environment is least busy. After the update is scheduled, the Administration Console displays the scheduled time in a top banner. Important:When you schedule the update in the node's details page, you are prompted for a date and time. This time is local to your browser time zone. You can reschedule the time for the update at any time prior to the scheduled time, if required by your organization's needs. The third stage, migration to the new version, takes place at the scheduled time, at which point, the system triggers the migration. The process takes from five to ten minutes to complete, and migrates the data and configuration from the running environment to the new environment. After everything is migrated to the new environment, the pre-update environment is powered off. During the migration, the following limitations apply: You cannot perform administrative tasks on the node that is undergoing the update. You cannot perform administrative tasks on the node that is undergoing the update. End users who do not have connected sessions to their virtual desktops or remote applications served by the updating node and who attempt to connect cannot do so. End users who do not have connected sessions to their virtual desktops or remote applications served by the updating node and who attempt to connect cannot do so. End users who have connected sessions served by the updating node will have those active sessions disconnected. After the migration is complete, those users can reconnect. No data loss will occur, unless you have used the Immediately option for the timeout handling in the farms and VDI desktop assignments. End users who have connected sessions served by the updating node will have those active sessions disconnected. After the migration is complete, those users can reconnect. No data loss will occur, unless you have used the Immediately option for the timeout handling in the farms and VDI desktop assignments. ImmediatelyCaution:Users with connected sessions to desktops or remote applications served by farms and VDI desktop assignments with Logoff Disconnected Sesstions set to Immediately will be immediately disconnected and those disconnected sessions are also logged off immediately. In those conditions, any in-progress user work is lost. Logoff Disconnected SesstionsImmediatelyTo avoid loss of in-progress end user data for this scenario, before the migration process starts, adjust the Logoff Disconnected Sesstions setting in the farms and VDI desktop assignments to a time value that will give those users time to save their work. Then after the update is finished, you can change the setting back to what it was before. Logoff Disconnected SesstionsWhen the update finishes, you can perform administrative tasks on the node. To see the software version that a node is currently running, select Settings > Capacity and click the node to open its summary page. The page displays the current software version running. Click the software version number to see associated release information. Settings > CapacitySettingsCapacityNote:After a Horizon Cloud node update, the old node environment remains in your Microsoft Azure resource groups in a powered-off state in case rollback is needed. The old powered-off node environment is automatically deleted in the next update cycle. Horizon Cloud nodeParent topic:Managing Your Horizon Cloud NodesVMware, Inc x 