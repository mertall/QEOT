VMware DocsMyLibrarytimesMyLibraryMyLibraryclose-lineTo update the agent-related software that is installed on RDSH images that are currently in use by farms, you first use the Images page's Update Agent action. Then you edit the farms to use those updated images. Update AgentAbout this taskImportant:The User Environment Manager agent software in an image is not updated by the system's agent update capability. If you want to update the User Environment Manager agent software, first perform the steps below to update the image, and then follow the steps in Update the User Environment Manager Agent Software in Images. User Environment ManagerUser Environment ManagerUpdate the User Environment Manager Agent Software in ImagesAt a high-level, the system's agent update capability works as follows: The system makes regular contact with the VMware CDS (Component Download Service) software distribution network to see if a new version of the Horizon Agents Installer is available. If so, the system automatically downloads that version to your Horizon Cloud nodes. The system makes regular contact with the VMware CDS (Component Download Service) software distribution network to see if a new version of the Horizon Agents Installer is available. If so, the system automatically downloads that version to your Horizon Cloud nodes. Horizon CloudAfter a new version is downloaded, the Images page reflects that an update is available. A visual indicator is displayed for those images that have the agent-related software at a level prior to the new version. After a new version is downloaded, the Images page reflects that an update is available. A visual indicator is displayed for those images that have the agent-related software at a level prior to the new version. During the agent update process: The system powers on the selected image's virtual machine (VM), clones a duplicate VM from the powered-on image, and then runs the convert-to-image process on the selected image to return it to its original published state. During this part of the process, the selected image's status on the Images page changes from Published to In Transition. When the duplicate VM exists, the system powers it on, installs the agent-related software using the newer update version that was selected in the wizard, and then runs the convert-to-image process on that duplicate to publish it. During the agent update process: The system powers on the selected image's virtual machine (VM), clones a duplicate VM from the powered-on image, and then runs the convert-to-image process on the selected image to return it to its original published state. During this part of the process, the selected image's status on the Images page changes from Published to In Transition. The system powers on the selected image's virtual machine (VM), clones a duplicate VM from the powered-on image, and then runs the convert-to-image process on the selected image to return it to its original published state. During this part of the process, the selected image's status on the Images page changes from Published to In Transition. When the duplicate VM exists, the system powers it on, installs the agent-related software using the newer update version that was selected in the wizard, and then runs the convert-to-image process on that duplicate to publish it. When the duplicate VM exists, the system powers it on, installs the agent-related software using the newer update version that was selected in the wizard, and then runs the convert-to-image process on that duplicate to publish it. At the end of the agent update process, the Images page lists both the originally selected image and its duplicate, where the duplicate image is the one with the updated agent software installed in it. At the end of the agent update process, the Images page lists both the originally selected image and its duplicate, where the duplicate image is the one with the updated agent software installed in it. Important:At the end of the agent update process, the RDSH image you selected when you clicked Update Agent ends up in the same state it was in when the process started, with its original agent version level. The new duplicate image gets the agent software at the selected update level. Update AgentThe agent update process results in a new assignable image that is a duplicate of the original, with the agent-related software updated to the version you specify in the wizard. The agent update workflow automatically clones the original image to make a new VM, installs the agent-related software of the specified level into that VM, and then converts that VM to make it an assignable (published) image. The system bases the name of the new image on the original image's name appended with a dash and a number. For example, if the original image's name is SalesGold, the agent update process results in an image such as SalesGold-2. At the end of the process, both images are listed on the Images page. The screenshot below illustrates the two images listed on the Images page after running the agent update process on the image named pat2016 and selecting the most recently available update version. Because the original image is unchanged at the end of the process, the blue dot remains displayed next to it. The pat2016-1 image contains the agent software are the update level, and because there are no newer update versions in the system yet, the pat2016-1 image has no blue dot next to it. PrerequisitesBefore you can use the Update Agent action on an RDSH image in your Horizon Cloud environment, the image must already have agent-related software at the following versions or later: Horizon CloudVersion 7.3.2 for the Horizon View Agent (64-bit) Version 7.3.2 for the Horizon View Agent (64-bit) Version 17.2 for the Horizon DaaS Agent Version 17.2 for the Horizon DaaS Agent You can see the agent version number in the properties on the image's details page. From the Images page, click on the image to open its details page. ProcedureNavigate to the Images page by clicking Inventory > Images. On the Images page, a blue dot appears next to the name of any image for which an update applies. If you hover over a blue dot, a popup displays indicating the new version of the Horizon Agents Installer available for that image. The screenshot below illustrates that an agent update is available for the image named pat2016. Hover your cursor over that blue dot to see what updates are available. Navigate to the Images page by clicking Inventory > Images. Inventory > ImagesOn the Images page, a blue dot appears next to the name of any image for which an update applies. If you hover over a blue dot, a popup displays indicating the new version of the Horizon Agents Installer available for that image. The screenshot below illustrates that an agent update is available for the image named pat2016. Hover your cursor over that blue dot to see what updates are available. Select the check box next to the image you want to update. Select the check box next to the image you want to update. Click Update Agent. The Agent Update wizard appears. Click Update Agent. Update AgentThe Agent Update wizard appears. In the Software step, select the update version you want to use from the drop-down list and click Next. In the Software step, select the update version you want to use from the drop-down list and click Next. NextIn the Command Line step, add any command-line options that might be relevant for this update on the image. The wizard displays a message that indicates whether command-line options are available for the specified update. Click Submit. A message displays at the top of the page indicating that the update has started. The system creates a clone virtual machine (VM) of the original image and then updates the agent-related components on that clone image. After the clone image is updated, the system runs the convert-to-desktop process to turn it into a published image. You can view the progress of the update task by selecting Monitor > Activity. If the task is not completed successfully within 24 hours, it is shown in failure status. Click Submit. SubmitA message displays at the top of the page indicating that the update has started. A message displays at the top of the page indicating that the update has started. The system creates a clone virtual machine (VM) of the original image and then updates the agent-related components on that clone image. After the clone image is updated, the system runs the convert-to-desktop process to turn it into a published image. The system creates a clone virtual machine (VM) of the original image and then updates the agent-related components on that clone image. After the clone image is updated, the system runs the convert-to-desktop process to turn it into a published image. You can view the progress of the update task by selecting Monitor > Activity. If the task is not completed successfully within 24 hours, it is shown in failure status. Monitor > ActivityWhat to do nextIf you are using the User Environment Manager agent software in the image, decide if you want to update that agent. If you want to update that agent, follow the steps in Update the User Environment Manager Agent Software in Images. The User Environment Manager agent software in an image is not updated by the system's agent update process. If you are using the User Environment Manager agent software in the image, decide if you want to update that agent. If you want to update that agent, follow the steps in Update the User Environment Manager Agent Software in Images. The User Environment Manager agent software in an image is not updated by the system's agent update process. User Environment ManagerUpdate the User Environment Manager Agent Software in ImagesUser Environment ManagerUpdate the farms that are using the original image by editing the farms to use the new duplicate image, the image which now has the updated agent software on it. In each farm's details page, click the General Settings Edit link to open a window, select the new duplicate image, and save. Update the farms that are using the original image by editing the farms to use the new duplicate image, the image which now has the updated agent software on it. In each farm's details page, click the General Settings Edit link to open a window, select the new duplicate image, and save. EditWhen you have updated the farms that were using the original image and can determine the original image is no longer needed by your organization, use the Images page to delete the original image. Deleting the original image is a best practice, to prevent other administrators in your organization from using an image that has down-level agents. When you have updated the farms that were using the original image and can determine the original image is no longer needed by your organization, use the Images page to delete the original image. Deleting the original image is a best practice, to prevent other administrators in your organization from using an image that has down-level agents. The following screenshots illustrate the location of the Edit link on the farm's details page and the window that subsequently opens when you click that link. EditIn this window, use the Image drop-down to select the new duplicate image that has the updated agents. In this example, the farm goes from using its original pat2016 image to the new pat2016-1 image that resulted from the agent update workflow Imagepat2016pat2016-1Parent topic:Updating the Agent-Related Software Used by Horizon CloudVMware, Inc x 